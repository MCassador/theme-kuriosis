<!doctype html>
{%- capture dir -%}
	{%- case request.locale.iso_code -%}
	  {%- when 'ae' or 'ar' or 'arc' or 'bcc' or 'bqi' or 'ckb' or 'dv' or 'fa' or 'glk' or 'ha' or 'he' or 'kwh' or 'ks' or 'ku' or 'mzn' or 'nqo' or 'pnb' or 'ps' or 'sd' or 'ug' or 'ur' or 'yi' -%}
	    rtl
	  {%- else -%}
	    ltr
	{%- endcase -%}
{%- endcapture -%}
<html class="no-js" lang="{{ request.locale.iso_code }}" dir="{{ dir }}">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, viewport-fit=cover">
	<meta name="theme-color" content="{{ settings.color_body_bg }}">
	<link rel="canonical" href="{{ canonical_url | split: '?' | first}}">
	<link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
	{% render 'head-preload' %}

	{% if settings.favicon != blank -%}
		<link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">
	{%- endif %}

	<title>
	{{ page_title }}{% if current_tags %}{% assign meta_tags = current_tags | join: ', ' %} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags }}{% endif %}{% if current_page != 1 %} &ndash; {{ 'general.meta.page' | t: page: current_page }}{% endif %}{% unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless %}
	</title>

	{% if page_description %}
	<meta name="description" content="{{ page_description | escape }}">
	{% endif %}

	{%- unless settings.heading_font.system? and settings.body_font.system? -%}
		<link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
	{%- endunless -%}

	<style>
		@font-face {
			font-family: 'aok_oblique';
			src: url('{{ "ao-katana-oblique-webfont.woff2" | asset_url }}') format('woff2'),
				 url('{{ "ao-katana-oblique-webfont.woff" | asset_url }}') format('woff');
			font-weight: normal;
			font-style: italic;
		}

		@font-face {
			font-family: 'aok';
			src: url('{{ "ao-katana-regular-webfont.woff2" | asset_url }}') format('woff2'),
				 url('{{ "ao-katana-regular-webfont.woff" | asset_url }}') format('woff');
			font-weight: normal;
			font-style: normal;
		}

	</style>


	{% render 'social-meta-tags' %}

	{{ 'app.css' | asset_url | stylesheet_tag }}
	{{ 'custom-styles.css' | asset_url | stylesheet_tag }}
	{{ 'wishlist.css' | asset_url | stylesheet_tag }}

	{% render 'head-variables' %}

	<script>
		window.theme = window.theme || {};
		theme = {
			settings: {
				money_with_currency_format: {{- shop.money_format | json -}},
				cart_drawer: {{- settings.cart_drawer -}},
				product_id: {% if product %}{{ product.id }}{% else %}false{% endif %},
			},
			routes: {
				root_url: '{{ routes.root_url }}',
				cart_url: '{{ routes.cart_url }}',
				cart_add_url: '{{ routes.cart_add_url }}',
				search_url: '{{ routes.search_url }}',
				cart_change_url: '{{ routes.cart_change_url }}',
				cart_update_url: '{{ routes.cart_update_url }}',
				predictive_search_url: '{{ routes.predictive_search_url }}',
			},
			variantStrings: {
        addToCart: `{{ 'products.product.add_to_cart' | t }}`,
        soldOut: `{{ 'products.product.sold_out' | t }}`,
        unavailable: `{{ 'products.product.unavailable' | t }}`,
        preOrder: `{{ 'products.product.pre_order' | t }}`,
      },
			strings: {
				requiresTerms: `{{ 'sections.cart.terms_confirm' | t }}`,
				shippingEstimatorNoResults: `{{ 'sections.cart.shipping_estimator.no_results' | t }}`,
				shippingEstimatorOneResult: `{{ 'sections.cart.shipping_estimator.one_result' | t }}`,
				shippingEstimatorMultipleResults: `{{ 'sections.cart.shipping_estimator.multiple_results' | t }}`,
				shippingEstimatorError: `{{ 'sections.cart.shipping_estimator.error' | t }}`
			}
		};
	</script>
		<script>
			// Ensure global money format fallbacks use the shop's format (prevents "$" defaults)
			window.moneyFormat = window.moneyFormat || {{ shop.money_format | json }};
			if (window.Shopify) {
				Shopify.money_format = Shopify.money_format || {{ shop.money_format | json }};
			}
		</script>
	{{ content_for_header }} <!-- Header hook for plugins -->

	<script>document.documentElement.className = document.documentElement.className.replace('no-js', 'js');</script>
	{{ settings.custom_html_head }}
<!-- Hotjar Tracking Code for https://kuriosis.com/ installiert von Dominik Singer am 02.05.2025 -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:6390708,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<script>function initApollo(){var n=Math.random().toString(36).substring(7),o=document.createElement("script");
o.src="https://assets.apollo.io/micro/website-tracker/tracker.iife.js?nocache="+n,o.async=!0,o.defer=!0,
o.onload=function(){window.trackingFunctions.onLoad({appId:"67e466f44304e7001190624b"})},
document.head.appendChild(o)}initApollo();</script>
</head>
<body class="animations-{{ settings.animations }} button-uppercase-{{ settings.button_uppercase }} navigation-uppercase-{{ settings.navigation_uppercase }} product-title-uppercase-{{ settings.product_title_uppercase }}{% if customer %} customer-logged-in{% endif %} template-{{ template | replace: '.', ' ' | truncatewords: 1, '' | handle }} template-{{ template | replace: '.', '-' | handle }}">
	<a class="screen-reader-shortcut" href="#main-content">{{ 'accessibility.skip_to_text' | t }}</a>
	<div id="wrapper">
		{%- sections 'header-group' -%}
		{%- sections 'overlay-group' -%}
		<div role="main" id="main-content">
			{{ content_for_layout }}
		</div>
		{% sections 'footer-group' %}
		{% render 'cart-drawer' %}
		{% render 'product-drawer' %}
		{% render 'search-drawer' %}
		<div class="click-capture"></div>
	</div>

	{{ 'vendor.min.js' | asset_url | script_tag }}
	{% if settings.animations %}
		{{ 'animations.min.js' | asset_url | script_tag }}
		<script>
			gsap.defaults({
				ease: Power4.easeOut
			});
			gsap.config({
		    nullTargetWarn: false
		  });
			gsap.registerPlugin(ScrollTrigger);
		</script>
	{% endif %}
	{{ 'slideshow.js' | asset_url | script_tag }}
	{{ 'app.js' | asset_url | script_tag }}
	{%- liquid
		assign add_product_js = false
		if settings.enable_quick_view or settings.enable_quick_add
			assign add_product_js = true
		endif

		if cart != empty and settings.cart_recommendations
			assign add_product_js = true
		endif
	-%}	
	{% if add_product_js %}
		<script src="{{ 'product.js' | asset_url }}" defer="defer"></script>
	{% endif %}
	<script type="module" src="{{ 'scroll-shadow.js' | asset_url }}" defer="defer"></script>
	<script src="{{ 'predictive-search.js' | asset_url }}" defer="defer"></script>
	{%- if request.design_mode -%}
		{{ 'theme-editor.js' | asset_url | script_tag }}
	{%- endif -%}
	{%- if settings.free_shipping -%}
		{{ 'free-shipping.js' | asset_url | script_tag }}
		{{ 'free-shipping.css' | asset_url | stylesheet_tag }}
	{%- endif -%}
	{%- if settings.cart_recommendations -%}
	<script src="{{ 'product-recommendations.js' | asset_url }}" defer="defer"></script>
	{%- endif -%}
	{%- if settings.cart_terms_conditions_enable -%}
		<script src="{{ 'terms-checkbox.js' | asset_url }}" defer="defer"></script>
	{%- endif -%}
	{% render 'back-to-top' %}

	{%- if settings.preload_links -%}
		{%- unless request.design_mode -%}
		<script type="module" src="{{ 'instant-page.js' | asset_url }}" defer="defer"></script>
		{%- endunless -%}
	{%- endif -%}

	<script src="{{ 'product-quantity-restriction.js' | asset_url }}" defer="defer"></script>

	<script>
		document.addEventListener('click', function(event) {
			// Handle custom dropdown toggle click
			const toggle = event.target.closest('.custom-dropdown-toggle');
			if (toggle) {
			  const dropdown = toggle.closest('.custom-dropdown');
			  const list = dropdown.querySelector('.custom-dropdown-list');
			  const isOpen = list.classList.contains('open');
		  
			  // Close all other dropdowns except the current one
			  document.querySelectorAll('.custom-dropdown-list.open').forEach(openList => {
				if (openList !== list) {
				  openList.classList.remove('open');
				}
			  });
		  
			  // Toggle the current dropdown's open state
			  list.classList.toggle('open', !isOpen);
			  return;
			}
		  
			// Handle custom dropdown option click
			const option = event.target.closest('.custom-dropdown-option');
			if (option) {
			  const dropdown = option.closest('.custom-dropdown');
			  const value = option.getAttribute('data-value');
			  const dropdownId = dropdown.getAttribute('data-dropdown-id');
			  const selectElement = dropdown.closest('fieldset').querySelector(`select[name="${dropdownId}"]`);
			  const toggle = dropdown.querySelector('.custom-dropdown-toggle');
			  const options = dropdown.querySelectorAll('.custom-dropdown-option');
		  
			  if (!selectElement) {
				console.error(`Select element with name "${dropdownId}" not found within the same fieldset as the custom dropdown.`);
				return;
			  }
		  
			  // Update hidden select value and trigger change
			  selectElement.value = value;
			  selectElement.dispatchEvent(new Event('change', { bubbles: true }));
		  
			  // Update displayed selected value in custom dropdown
			  toggle.querySelector('.selected-value').textContent = option.querySelector('.option-value').textContent;
		  
			  // Update selected styling
			  options.forEach(opt => opt.classList.remove('selected'));
			  option.classList.add('selected');
		  
			  // Close the dropdown list
			  dropdown.querySelector('.custom-dropdown-list').classList.remove('open');
		  
			  return;
			}
		  
			// Close all dropdowns if clicking outside
			document.querySelectorAll('.custom-dropdown-list.open').forEach(openList => openList.classList.remove('open'));
		  });

		// Function to display the wishlist live in all wishlist blocks
		function displayWishlist() {
			const wishlistData = JSON.parse(localStorage.getItem("wishlist")) || [];
			const wishlistBlocks = document.querySelectorAll(".kuriosis-wishlist-block");
			
			wishlistBlocks.forEach(wishlistBlock => {
				if (wishlistData.length === 0) {
					wishlistBlock.innerHTML = "<p>Your wishlist is empty.</p>";
					updateWishlistCount(); // Update wishlist count in header
					return;
				}
	
				const wishlistHtml = wishlistData.map(item => `
					<product-card class="product-card">
						<figure class="product-featured-image">
							<a href="${item.productUrl}" title="${item.productTitle}" class="product-featured-image-link aspect-ratio aspect-ratio--{{ settings.product_aspect_ratio }}" style="--padding-bottom: 100%;">
								<div class="thb-placeholder">
									<img src="${item.productImg}" alt="${item.productTitle}">
								</div>
							</a>
						</figure>
						<div class="product-card-info">
							<div class="product-card-vendor">
								<a href="#" title="${item.productVendor}">${item.productVendor}</a>
							</div>
							<a href="${item.productUrl}" title="${item.productTitle}" class="product-card-title">${item.productTitle}</a>
							<p class="product-price">${item.productPrice}</p>
							<button onclick="toggleWishlist({
								productTitle: '${item.productTitle.replace(/'/g, "\\'")}',
								productImg: '${item.productImg}',
								productPrice: '${item.productPrice}',
								productUrl: '${item.productUrl}',
								productVendor: '${item.productVendor}'
							})" class="wishlist_button" title="Remove from Wishlist" data-product-title="${item.productTitle}">
								<svg class="heart-filled" xmlns="http://www.w3.org/2000/svg" width="37.989" height="35.261" viewBox="0 0 37.989 35.261">
									<g id="Gruppe_552" data-name="Gruppe 552" transform="translate(0.652 0.652)">
										<g id="Gruppe_548" data-name="Gruppe 548" transform="translate(0.348 0.348)">
											<path id="Pfad_1583" data-name="Pfad 1583" d="M36.208,9.559a9.337,9.337,0,0,0-17.992-3.5,9.339,9.339,0,0,0-18,3.5c0,10.115,18,23.649,18,23.649S36.208,18.454,36.208,9.559" transform="translate(-0.219 -0.219)" fill="#374000" stroke="#374000" stroke-miterlimit="10" stroke-width="2"/>
										</g>
									</g>
								</svg>
							</button>
						</div>
					</product-card>
				`).join("");
	
				wishlistBlock.innerHTML = wishlistHtml;
			});
			updateWishlistCount(); // Ensure count is updated whenever displayWishlist is called
		}
	
		// Function to update the wishlist count in the header
		function updateWishlistCount() {
			const wishlistData = JSON.parse(localStorage.getItem("wishlist")) || [];
			document.getElementById("wishlist-count").textContent = wishlistData.length;
		}
	
		// General wishlist function with live update
		function toggleWishlist(productData) {
			const pdpData = {
				productTitle: productData.productTitle,
				productImg: productData.productImg,
				productPrice: productData.productPrice,
				productUrl: productData.productUrl,
				productVendor: productData.productVendor
			};
	
			let wishlistData = JSON.parse(localStorage.getItem("wishlist")) || [];
			const isAlreadyInWishlist = wishlistData.some(
				(item) => item.productTitle === pdpData.productTitle
			);
			const wishlistButtons = document.querySelectorAll(`[data-product-title="${CSS.escape(pdpData.productTitle)}"]`);
	
			if (!isAlreadyInWishlist) {
				wishlistData.push(pdpData);
				localStorage.setItem("wishlist", JSON.stringify(wishlistData));
				wishlistButtons.forEach(button => {
					button.innerHTML = `
						<svg class="heart-filled" xmlns="http://www.w3.org/2000/svg" width="37.989" height="35.261" viewBox="0 0 37.989 35.261">
							<g id="Gruppe_552" data-name="Gruppe 552" transform="translate(0.652 0.652)">
								<g id="Gruppe_548" data-name="Gruppe 548" transform="translate(0.348 0.348)">
									<path id="Pfad_1583" data-name="Pfad 1583" d="M36.208,9.559a9.337,9.337,0,0,0-17.992-3.5,9.339,9.339,0,0,0-18,3.5c0,10.115,18,23.649,18,23.649S36.208,18.454,36.208,9.559" transform="translate(-0.219 -0.219)" fill="#374000" stroke="#374000" stroke-miterlimit="10" stroke-width="2"/>
								</g>
							</g>
						</svg>`;
				});
			} else {
				wishlistData = wishlistData.filter(
					(item) => item.productTitle !== pdpData.productTitle
				);
				localStorage.setItem("wishlist", JSON.stringify(wishlistData));
				wishlistButtons.forEach(button => {
					button.innerHTML = `
						<svg class="heart-outline" xmlns="http://www.w3.org/2000/svg" width="37.989" height="35.261" viewBox="0 0 37.989 35.261">
							<g id="Gruppe_552" data-name="Gruppe 552" transform="translate(0.652 0.652)">
								<g id="Gruppe_548" data-name="Gruppe 548" transform="translate(0.348 0.348)">
									<path id="Pfad_1583" data-name="Pfad 1583" d="M36.208,9.559a9.337,9.337,0,0,0-17.992-3.5,9.339,9.339,0,0,0-18,3.5c0,10.115,18,23.649,18,23.649S36.208,18.454,36.208,9.559" transform="translate(-0.219 -0.219)" fill="none" stroke-miterlimit="10" stroke-width="2"/>
								</g>
							</g>
						</svg>`;
				});
			}
	
			// Update both the wishlist display and count after modifying the wishlist
			displayWishlist();
		}
	
		// Initialize all wishlist buttons on page load
		function initializeWishlistButtons() {
			const wishlistData = JSON.parse(localStorage.getItem("wishlist")) || [];
			document.querySelectorAll(".wishlist_button").forEach(button => {
				const productTitle = button.getAttribute("data-product-title");
				const isInWishlist = wishlistData.some(item => item.productTitle === productTitle);
	
				button.innerHTML = isInWishlist
					? `<svg class="heart-filled" xmlns="http://www.w3.org/2000/svg" width="37.989" height="35.261" viewBox="0 0 37.989 35.261">
						<g id="Gruppe_552" data-name="Gruppe 552" transform="translate(0.652 0.652)">
							<g id="Gruppe_548" data-name="Gruppe 548" transform="translate(0.348 0.348)">
								<path id="Pfad_1583" data-name="Pfad 1583" d="M36.208,9.559a9.337,9.337,0,0,0-17.992-3.5,9.339,9.339,0,0,0-18,3.5c0,10.115,18,23.649,18,23.649S36.208,18.454,36.208,9.559" transform="translate(-0.219 -0.219)" fill="#374000" stroke="#374000" stroke-miterlimit="10" stroke-width="2"/>
							</g>
						</g>
						</svg>`
					: `<svg class="heart-outline" xmlns="http://www.w3.org/2000/svg" width="37.989" height="35.261" viewBox="0 0 37.989 35.261">
						<g id="Gruppe_552" data-name="Gruppe 552" transform="translate(0.652 0.652)">
							<g id="Gruppe_548" data-name="Gruppe 548" transform="translate(0.348 0.348)">
								<path id="Pfad_1583" data-name="Pfad 1583" d="M36.208,9.559a9.337,9.337,0,0,0-17.992-3.5,9.339,9.339,0,0,0-18,3.5c0,10.115,18,23.649,18,23.649S36.208,18.454,36.208,9.559" transform="translate(-0.219 -0.219)" fill="none" stroke-miterlimit="10" stroke-width="2"/>
							</g>
						</g>
					</svg>`;
			});
		}
	
		// Set up initial wishlist display, button states, and count on DOM load
		document.addEventListener("DOMContentLoaded", function () {
			displayWishlist();
			initializeWishlistButtons();
			updateWishlistCount(); // Initialize wishlist count on page load
		});
	</script>


	{% render 'wishlist-drawer' %}
	{{ 'wishlist.js' | asset_url | script_tag }}
  </body>




</html>
