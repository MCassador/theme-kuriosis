{{- 'kuriosis-facts-2025.css' | asset_url | stylesheet_tag -}}
{{- 'swiper.min.css' | asset_url | stylesheet_tag -}}
<script src="{{ 'swiper-bundle.min.js' | asset_url }}" defer></script>

{%- liquid
  assign disable_top_spacing = section.settings.disable_top_spacing
  assign disable_bottom_spacing = section.settings.disable_bottom_spacing
  assign max_width = section.settings.max_width
  assign text_color = section.settings.text_color
  assign bg_color = section.settings.bg_color
-%}

<div class="kuriosis-facts-twentytwentyfive section-spacing{% if disable_top_spacing %} section-spacing--disable-top{% endif %}{% if disable_bottom_spacing %} section-spacing--disable-bottom{% endif %}" style="max-width: {{ max_width }}; margin-left: auto; margin-right: auto; color: {{ text_color }}!important; background-color: {{ bg_color }};">

  <div class="row">
    <div class="small-12">

      {%- if section.settings.show_breadcrumbs -%}
        {%- render 'breadcrumbs' -%}
      {%- endif -%}

      <div class="heading-top">
        {%- if section.settings.heading -%}
          <{{ section.settings.heading_tag }} style="color: {{ text_color }}!important;" class="h2">
            {{ section.settings.heading }}
          </{{ section.settings.heading_tag }}>
        {%- endif -%}
        
      </div>
    </div>
    <div class="small-12 medium-5 large-4">
      <div class="tabs">
  
        {% for block in section.blocks limit: 3 %}
        <input type="radio" id="tab-{{ forloop.index }}" name="tab-control" class="tab-input tab-input-{{ forloop.index }}"{% if forloop.first %} checked{% endif %}>  
        {% endfor %}
    
        <div class="tab-wrap">
    
          <ul class="tab-list">
            {% for block in section.blocks limit: 3 %}
              <li class="tab-item tab-item-{{ forloop.index }}" title="{{ block.settings.title }}">
                <label for="tab-{{ forloop.index }}" class="tab-label proza-libre tab-label-{{ forloop.index }}" role="button">
                  {{ block.settings.title }}
                </label>
              </li>
            {% endfor %}
          </ul>
          
          <div class="slider"></div>
        </div>
    
        <div class="content">
          {% for block in section.blocks limit: 3 %}
              <section class="tab-content proza-libre tab-content-{{ forloop.index }}">
                <p> {{ block.settings.text }}</p>
                <ul class="icon-list">
                  {% if block.settings.icon_1 %}
                  <li><img src="{{ block.settings.icon_1 | image_url: width: 25 }}" alt="{{ block.settings.icon_1.alt | default: block.settings.title }}" loading="lazy" width="25" height="25"> {{ block.settings.icon_text_1 }}</li>
                  {% endif %}
                  {% if block.settings.icon_2 %}
                  <li><img src="{{ block.settings.icon_2 | image_url: width: 25 }}" alt="{{ block.settings.icon_2.alt | default: block.settings.title }}" loading="lazy" width="25" height="25"> {{ block.settings.icon_text_2 }}</li>
                  {% endif %}
                  {% if block.settings.icon_3 %}
                  <li><img src="{{ block.settings.icon_3 | image_url: width: 25 }}" alt="{{ block.settings.icon_3.alt | default: block.settings.title }}" loading="lazy" width="25" height="25"> {{ block.settings.icon_text_3 }}</li>
                  {% endif %}
                  {% if block.settings.icon_4 %}
                  <li><img src="{{ block.settings.icon_4 | image_url: width: 25 }}" alt="{{ block.settings.icon_4.alt | default: block.settings.title }}" loading="lazy" width="25" height="25"> {{ block.settings.icon_text_4 }}</li>
                  {% endif %}
                  {% if block.settings.icon_5 %}
                  <li><img src="{{ block.settings.icon_5 | image_url: width: 25 }}" alt="{{ block.settings.icon_5.alt | default: block.settings.title }}" loading="lazy" width="25" height="25"> {{ block.settings.icon_text_5 }}</li>
                  {% endif %}
                </ul>
              </section>
          {% endfor %}
        </div>
      </div>
    </div>

    <div class="small-12 medium-6 medium-offset-1 large-offset-2">
      <div class="tab-sliders">
        {% for block in section.blocks limit: 3 %}
          <div class="tab-slider tab-slider-{{ forloop.index }}{% if forloop.first %} active{% endif %}" data-tab="{{ forloop.index }}">
            {% assign has_images = false %}
            {% if block.settings.image_1 or block.settings.image_2 or block.settings.image_3 or block.settings.image_4 or block.settings.image_5 or block.settings.image_6 or block.settings.image_7 or block.settings.image_8 or block.settings.image_9 or block.settings.image_10 %}
              {% assign has_images = true %}
            {% endif %}
            
            {% if has_images %}
              <div class="swiper swiper-tab-{{ forloop.index }}">
                <div class="swiper-wrapper">
                  {% if block.settings.image_1 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_1 | image_url: width: 256 }}" alt="{{ block.settings.image_1.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_2 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_2 | image_url: width: 256 }}" alt="{{ block.settings.image_2.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_3 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_3 | image_url: width: 256 }}" alt="{{ block.settings.image_3.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_4 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_4 | image_url: width: 256 }}" alt="{{ block.settings.image_4.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_5 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_5 | image_url: width: 256 }}" alt="{{ block.settings.image_5.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_6 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_6 | image_url: width: 256 }}" alt="{{ block.settings.image_6.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_7 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_7 | image_url: width: 256 }}" alt="{{ block.settings.image_7.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_8 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_8 | image_url: width: 256 }}" alt="{{ block.settings.image_8.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_9 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_9 | image_url: width: 256 }}" alt="{{ block.settings.image_9.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                  {% if block.settings.image_10 %}
                    <div class="swiper-slide">
                      <div class="slider-image-container">
                        <img src="{{ block.settings.image_10 | image_url: width: 256 }}" alt="{{ block.settings.image_10.alt | default: block.settings.title }}" loading="lazy" width="256" height="256">
                      </div>
                    </div>
                  {% endif %}
                </div>
                <div class="swiper-pagination"></div>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tabInputs = document.querySelectorAll('.tab-input');
      const tabSliders = document.querySelectorAll('.tab-slider');
      const swipers = {};

      // Initialize Swiper for the first active tab
      function initializeSwiper(tabIndex) {
        const swiperContainer = document.querySelector(`.swiper-tab-${tabIndex}`);
        if (swiperContainer && !swipers[tabIndex]) {
          const slides = swiperContainer.querySelectorAll('.swiper-slide');
          if (slides.length > 0) {
            swipers[tabIndex] = new Swiper(swiperContainer, {
              slidesPerView: 1.5,
              spaceBetween: 15,
              centeredSlides: false,
              loop: false,
              pagination: {
                el: '.swiper-pagination',
                clickable: true,
              },
              lazy: {
                loadPrevNext: true, 
                loadPrevNextAmount: 2,
              },
              breakpoints: {
                768: {
                  slidesPerView: 2.5,
                  spaceBetween: 15,
                  centeredSlides: false,
                },
                1024: {
                  slidesPerView: 2.8,
                  spaceBetween: 15,
                  centeredSlides: false,
                }
              }
            });
          }
        }
      }

      // Handle tab switching
      tabInputs.forEach((input, index) => {
        input.addEventListener('change', function() {
          const tabIndex = index + 1;
          
          // Hide all tab sliders
          tabSliders.forEach(slider => {
            slider.classList.remove('active');
          });
          
          // Show current tab slider
          const currentSlider = document.querySelector(`.tab-slider-${tabIndex}`);
          if (currentSlider) {
            currentSlider.classList.add('active');
            
            // Initialize Swiper for this tab if not already done
            setTimeout(() => {
              initializeSwiper(tabIndex);
              if (swipers[tabIndex]) {
                swipers[tabIndex].update();
              }
            }, 100);
          }
        });
      });

      // Initialize Swiper for the first tab on page load
      const firstTab = document.querySelector('.tab-input:checked');
      if (firstTab) {
        const firstTabIndex = Array.from(tabInputs).indexOf(firstTab) + 1;
        setTimeout(() => {
          initializeSwiper(firstTabIndex);
        }, 100);
      }
    });
  </script>

</div>

{% comment %} <style>
/* Estilos adicionais para garantir que as imagens sejam mostradas completamente */
.swiper-slide {
  width: auto !important;
  flex-shrink: 0;
}

.slider-image-container {
  width: 100%;
  height: 100%;
}

.slider-image-container img {
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: 8px;
}

/* Ajustes para diferentes tamanhos de tela */
@media (max-width: 767px) {
  .swiper-slide {
    width: 100% !important;
  }
  
  .slider-image-container {
    max-width: 100%;
    padding: 0 10px;
  }
}

@media (min-width: 768px) and (max-width: 1023px) {
  .swiper-slide {
    width: calc(50% - 7.5px) !important;
  }
  
  .slider-image-container {
    max-width: 100%;
  }
}

@media (min-width: 1024px) {
  .swiper-slide {
    width: calc(33.333% - 10px) !important;
  }
  
  .slider-image-container {
    max-width: 100%;
  }
  
  .swiper {
    overflow: hidden;
    padding: 0;
  }
}

/* Pagination */
.swiper-pagination {
  bottom: 10px !important;
}

.swiper-pagination-bullet {
  background: rgba(0, 0, 0, 0.5);
}

.swiper-pagination-bullet-active {
  background: #333;
}
</style> {% endcomment %}

{% schema %}
{
  "name": "Kuriosis facts 2025",
  "class": "kuriosis-facts-2025",
  "max_blocks": 3,
  "settings": [
    {
      "type": "checkbox",
      "id": "show_breadcrumbs",
      "default": false,
      "label": "Show Breadcrumbs"
    },
    {
      "type": "select",
      "id": "heading_tag",
      "label": "Heading Tag",
      "default": "h2",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        },
        {
          "value": "h4",
          "label": "H4"
        }
      ]
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Handcrafted in Berlin"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#374000"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "checkbox",
      "id": "disable_top_spacing",
      "default": false,
      "label": "Remove top spacing"
    },
    {
      "type": "checkbox",
      "id": "disable_bottom_spacing",
      "default": false,
      "label": "Remove bottom spacing"
    },
    {
      "type": "text",
      "id": "max_width",
      "label": "Max Width",
      "default": "1600px",
      "info": "Set the maximum width of the section (e.g., 100px or 100%)"
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Column",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "default": "Column",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>",
          "label": "Description"
        },
        {
          "type": "image_picker",
          "id": "icon_1",
          "label": "Icon 1"
        },
        {
          "type": "text",
          "id": "icon_text_1",
          "label": "Icon Text 1"
        },
        {
          "type": "image_picker",
          "id": "icon_2",
          "label": "Icon 2"
        },
        {
          "type": "text",
          "id": "icon_text_2",
          "label": "Icon Text 2"
        },
        {
          "type": "image_picker",
          "id": "icon_3",
          "label": "Icon 3"
        },
        {
          "type": "text",
          "id": "icon_text_3",
          "label": "Icon Text 3"
        },
        {
          "type": "image_picker",
          "id": "icon_4",
          "label": "Icon 4"
        },
        {
          "type": "text",
          "id": "icon_text_4",
          "label": "Icon Text 3"
        },
        {
          "type": "image_picker",
          "id": "icon_5",
          "label": "Icon 5"
        },
        {
          "type": "text",
          "id": "icon_text_5",
          "label": "Icon Text 5"
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image 1"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image 2"
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image 3"
        },
        {
          "type": "image_picker",
          "id": "image_4",
          "label": "Image 4"
        },
        {
          "type": "image_picker",
          "id": "image_5",
          "label": "Image 5"
        },
        {
          "type": "image_picker",
          "id": "image_6",
          "label": "Image 6"
        },
        {
          "type": "image_picker",
          "id": "image_7",
          "label": "Image 7"
        },
        {
          "type": "image_picker",
          "id": "image_8",
          "label": "Image 8"
        },
        {
          "type": "image_picker",
          "id": "image_9",
          "label": "Image 9"
        },
        {
          "type": "image_picker",
          "id": "image_10",
          "label": "Image 10"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Kuriosis facts 2025",
      "blocks": [
        {
          "type": "column"
        },
        {
          "type": "column"
        },
        {
          "type": "column"
        }
      ]
    }
  ],
  "enabled_on": {
    "templates": ["*"],
    "groups": [
      "header", "footer"
    ]
  }
}
{% endschema %}